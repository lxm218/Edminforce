{"version":3,"sources":["meteor://ğŸ’»app/client/lib/router/common.jsx"],"names":[],"mappings":";;;;;;;;;;;;AAKA;;;AAGI,cAAU,CAAC,SAAS,GAAG,EAAE;AACzB,QAAI,UAAU,GAAG,IAAI;;;AAGrB,cAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,UAAS,OAAO,EAAC;;;;AAIxC,YAAG,UAAU,IAAI,QAAQ,EAAC;AACtB,sBAAU,GAAE,GAAG;SAClB;;AAGD,YAAI,CAAC,UAAU,CAAC,UAAU,IAAI,UAAU,EACpC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,MACpC,IAAI,UAAU,CAAC,UAAU,EAC1B,UAAU,CAAC,SAAS,CAAC,GAAG,EAAE;;AAE9B,kBAAU,CAAC,UAAU,GAAG,KAAK;;AAE7B,YAAI,EAAE,MAAM,CAAC,SAAS,EAAE,IAAI,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE;;AAE1C,gBAAI,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,EAAC;;;;;;;;;AAS5C,0BAAU,CAAC,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC;aAC9B,MAAM,IAAI,OAAO,CAAC,IAAI,IAAI,QAAQ,EAAE;;AAEjC,uBAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,OAAO,CAAC,IAAI,CAAC;;;;;;;;AAQ/C,0BAAU,CAAC,EAAE,CAAC,QAAQ,CAAC;aAC1B;SACJ;KAEJ,CAAC,CAAC,CAAC;;AAIJ,cAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,UAAS,OAAO,EAAC;;;AAGvC,kBAAU,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,IAAI;AACtC,cAAM,CAAC,QAAQ,CAAC,CAAC,EAAC,CAAC,CAAC;KACvB,CAAC,CAAC,CAAC;CAIP;;;AAOD,aAAa,CAAC,KAAK,CAAC,GAAG,EAAE;AACrB,QAAI,EAAE,MAAM;AACZ,UAAM,EAAE,UAAU,CAAC,EAAE;AACjB,WAAG,CAAC,YAAY,CAAC,CAAC,EAAE;AAChB,qBAAS,EAAE,MAAM;AACjB,qBAAS,EAAE,IAAI;AACf,yBAAa,EAAC,IAAI;AAClB,oBAAQ,EAAE,oBAAC,GAAG,CAAC,IAAI,OAAE;;AAErB,0BAAc,EAAC,IAAI;AACnB,yBAAa,EAAC,IAAI;SACrB,CAAC;KACL;CACJ,CAAC;;AAEF,aAAa,CAAC,KAAK,CAAC,kBAAkB,EAAE;AACpC,QAAI,EAAE,iBAAiB;AACvB,UAAM,EAAE,UAAU,CAAC,EAAE;AACjB,WAAG,CAAC,YAAY,CAAC,CAAC,EAAE;AAChB,qBAAS,EAAE,iBAAiB;AAC5B,qBAAS,EAAE,IAAI;AACf,yBAAa,EAAC,IAAI;AAClB,oBAAQ,EAAE,oBAAC,GAAG,CAAC,eAAe,OAAE;SACnC,CAAC;KACL;CACJ,CAAC,uE","file":"/client/lib/router/common.jsx","sourcesContent":["/**\n * Client Routes\n */\n\n\n{\n    //global router control\n\n    FlowRouter.LastRoute = []\n    var savedRoute = null\n\n    //define global triggers for test\n    FlowRouter.triggers.enter([function(context){\n        //console.log('Router enter: path='+context.path,' name= '+FlowRouter.getRouteName())\n\n        //hack ä»æ³¨å†Œé¡µè·³è¿‡æ¥ todo ç³»ç»Ÿå¤„ç†url history\n        if(savedRoute == '/login'){\n            savedRoute ='/'\n        }\n\n\n        if (!FlowRouter.BackButton && savedRoute)\n            FlowRouter.LastRoute.push(savedRoute)\n        else if (FlowRouter.BackButton)\n            FlowRouter.LastRoute.pop()\n\n        FlowRouter.BackButton = false\n        //calphin logic\n        if (!(Meteor.loggingIn() || Meteor.userId())) {\n            //Todo hard code; shouldä½¿ç”¨name ;ç­‰å¾… name pathæœ€ç»ˆç¡®å®š\n            if (context.path.indexOf(\"reset-password\") > -1){\n                /* \n                 * This is for resetting password via email.\n                 * User will click on an URL contianing 'reset-password'.\n                 * At that time, user is not logged in, but he has the token to reset password\n                 * So, we send him to reset password page, instead of the login page.\n                 * Todo: make sure that the token is provided in the link, if not, we should still\n                 * direct user to login page.\n                 */\n                FlowRouter.go(context.path)\n            } else if (context.path != '/login') {\n                //ç”¨äºç™»é™†åå›è°ƒ  ç™»é™†åº”è¯¥ä»¥dispatch messageæ–¹å¼\n                Session.set('redirectAfterLogin', context.path)\n                //var redirectAfterLogin =Session.get('redirectAfterLogin')\n                //if(redirectAfterLogin && 'redirectAfterLoginä¸æ˜¯login pageæ—¶'){\n                //    FlowRouter.go(redirectAfterLogin)\n                //}else{\n                //    //to verify\n                //    FlowRouter.go('/')\n                //}\n                FlowRouter.go('/login')\n            }\n        }\n\n    }]);\n\n\n\n    FlowRouter.triggers.exit([function(context){\n        //console.log('Router exit: path='+context.path,' name= '+FlowRouter.getRouteName())\n\n        savedRoute = FlowRouter.current().path\n        window.scrollTo(0,0)\n    }]);\n\n\n\n}\n\n\n\n\n\n// Home Route\nDefaultRoutes.route('/', {\n    name: \"home\",\n    action: function (p) {\n        App.routeHandler(p, {\n            pageTitle: \"Home\",\n            headerNav: null,\n            leftNavToggle:true, //å·¦ä¾§å¯¼èˆªè§¦å‘æŒ‰é’®\n            bodyTmpl: <Cal.Home/>,\n\n            hideBackButton:true,\n            leftNavToggle:true\n        })\n    }\n})\n\nDefaultRoutes.route('/ContactInfoPage', {\n    name: \"ContactInfoPage\",\n    action: function (p) {\n        App.routeHandler(p, {\n            pageTitle: \"ContactInfoPage\",\n            headerNav: null,\n            leftNavToggle:true, //å·¦ä¾§å¯¼èˆªè§¦å‘æŒ‰é’®\n            bodyTmpl: <Cal.ContactInfoPage/>\n        })\n    }\n})\n\n\n\n\n\n"]}